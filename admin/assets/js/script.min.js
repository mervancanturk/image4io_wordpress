function hideErrorSuccess(){setInterval("hideErrorSuccessHide()",5e3)}function hideErrorSuccessHide(){$(".alert").hide()}function allUpload(e=0){$.post(ajaxurl,{folder:$(".createFolderImage").attr("data-id"),repost_id:value,action:"mycustom_action"},function(e){e=maybe_parse_json(""+e),console.log(e);var a=Math.ceil(100/e.count*e.progres);if(e.count!=value){var t=a+"%";$(".allUpdateImage .bar").width(t),$(".allUpdateImage .percent").html(t),$(".allUpdateImage #status").html(e.imageName),value++,allUpload(e.count)}else{t="100%";$(".allUpdateImage .bar").width(t),$(".allUpdateImage .percent").html(t),$(".allUpdateImage #status").html("Tebrikleri bütün resimleriniz sunucuya aktarıldı."),document_parse($(".createFolderImage").attr("data-id"),this)}})}function maybe_parse_json(e){var a;try{a=$.parseJSON(e)}catch(i){var t=e.replace(/((.|\n)+?){"/gm,'{"');try{a=$.parseJSON(t)}catch(t){console.log("*** \n*** \n*** Error-causing response:\n***\n***\n",e),a={message:"JSON failed: another plugin caused a conflict with completing this request. Check your browser's Javascript console to view the invalid content."}}}return a}function CheckUncheckAll(){var e=document.getElementsByClassName("cb-select-all");if(1==e.checked)for(var a=document.getElementsByName("media"),t=0,i=a.length;t<i;t++)a[t].checked=!0,a[t].attr("data-check","checked");else for(a=document.getElementsByName("media"),t=0,i=a.length;t<i;t++)a[t].checked=!1,a[t].attr("data-check","")}function replaceAll(e,a,t){for(var i=e.indexOf(a);i>-1;)e=e.replace(a,t),i=e.indexOf(a);return e}function createFolder(){$("ul.attachments").html("");var e=$(".createFolderImage").attr("data-id"),a=$("#folderName").val();$.ajax({url:window.plugin_option.plugin_dir+"query.php?get=createFolder",type:"POST",data:{apiKey:window.plugin_option.apiKey,apiSecret:window.plugin_option.apiSecret,path:window.plugin_option.path,folder:e,folderName:a},dataType:"json",success:function(e){"AlreadyExist"==e.createdFolder.status?($(".modal-body .alert-danger span").html(message.error.createFolder),$(".modal-body .alert").show(),$(".modal-body .success").hide(),hideErrorSuccess()):($(".modal-body .success span").html(replaceAll(e.createdFolder.name,"/","")+" "+message.success.createFolder),$(".modal-body .alert").hide(),$(".modal-body .success").show(),hideErrorSuccess()),document_parse($(".createFolderImage").attr("data-id"),this)}})}function urlSave(){$("ul.attachments").html("");var e=$(".createFolderImage").attr("data-id"),a=$("#url").val();$.ajax({url:window.plugin_option.plugin_dir+"query.php?get=fetch",type:"POST",data:{apiKey:window.plugin_option.apiKey,apiSecret:window.plugin_option.apiSecret,path:window.plugin_option.path,folder:e,url:a},dataType:"json",success:function(e){var a=[];a=(error_return(e.fetchedFile),error_return(e.fetchedFile)),0==a?($("#urlUpload .alert-danger span").html(message.error.fetchedFileError),$("#urlUpload .alert").show(),$("#urlUpload .success").hide(),hideErrorSuccess()):($("#urlUpload .success span").html(e.fetchedFile.name+" "+message.success.fetchedFileSucces),console.log(e.fetchedFile.name+" "+message.success.fetchedFileSucces),$("#urlUpload .alert").hide(),$("#urlUpload .success").show(),hideErrorSuccess()),document_parse($(".createFolderImage").attr("data-id"),this)}})}function folderOpen(e){clicks++,1==clicks&&($(".createFolderImage").attr("data-id","/"),$(".mxlayer-close").trigger("click"),$.mxlayer({title:"image4io",sidebar:$("#sidebar-template").html(),main:$(e).html(),button:!1,cancel:function(e){},confirm:function(e){}}),document_parse("/",this))}function document_parse(e,a){if(0==$(".image4ioList").data("block"))if(void 0===$(a).attr("data-type")&&$(a).attr("data-type","folder"),"folder"==$(a).attr("data-type"))bread(e,$(a).attr("data-id")),"fileList"==$(".image4ioList").attr("id")?$(".image4ioList").html(""):$("#the-list").html(""),$(".createFolderImage").attr("data-id",e),$.ajax({url:window.plugin_option.plugin_dir+"scan.php",type:"POST",data:{apiKey:window.plugin_option.apiKey,apiSecret:window.plugin_option.apiSecret,path:window.plugin_option.path,dir:e},dataType:"json",success:function(e){e.length>0?($(".no-media").hide(),"fileList"==$(".image4ioList").attr("id")?e.forEach(function(e){if("file"==e.type){$(".attachments").append('<li tabindex="'+i+'" data-check="0" data-type="file" id="file_'+i+'" data-name="'+e.original_name+'" data-format="'+e.format+'" data-create="'+e.createdAt+'" data-widthh="'+e.width+" x "+e.height+'" data-size="'+e.size+'" data-id="'+e.name+'" onclick="document_parse(\''+e.path+'\',this)" class="attachment"><div class="attachment-preview js--select-attachment type-image subtype-jpeg landscape"><div class="thumbnail"><div class="centered"><img src="https://cdn.image4.io/'+window.plugin_option.path+e.name+'?w=120&f=auto" draggable="false" alt=""></div></div></div></li>'),$("#stylecss").append("#file_"+i+" .attachment-preview:before {display: block; content:attr(data-before)}");var a=e.original_name.substr(0,17);$("#file_"+i+" .attachment-preview").attr("data-before",a),i++}else{$(".attachments").append('<li data-id="'+e.name+'" data-type="folder" data-check="0" class="attachment folder" id="folder_'+e.name+'" onclick="document_parse(\''+e.path+'\',this)"><div class="attachment-preview js--select-attachment type-image subtype-jpeg landscape"><div class="thumbnail"><div class="centered"><img src="'+window.plugin_option.plugin_dir+'admin/assets/images/folder.svg" draggable="false" alt=""></div></div></div></li>'),$("#stylecss").append("#folder_"+e.name+" .attachment-preview:before {display: block; content:attr(data-before)}");a=e.name.substr(0,17);$("#folder_"+e.name+" .attachment-preview").attr("data-before",a)}}):e.forEach(function(e){"file"==e.type?$("#the-list").append('<tr class="author-self status-inherit"><th scope="row" class="check-column"><label class="screen-reader-text">'+e.original_name+'</label><input type="checkbox" class="checkboxs" name="media" value="'+e.name+'" data-type="'+e.type+'" data-id="'+e.name+'"></th><td class="title column-title has-row-actions column-primary" data-colname="Dosya"><strong class="has-media-icon"><a href="javascript:;" data-name="'+e.original_name+'" data-format="'+e.format+'" data-create="'+e.createdAt+'" data-widthh="'+e.width+" x "+e.height+'" data-type="'+e.type+'" data-size="'+e.size+'" data-id="'+e.name+'" onclick="document_parse(\''+e.path+'\',this)" rel="bookmark"><img width="60" height="60" src="https://cdn.image4.io/'+window.plugin_option.path+e.name+'?w=120&f=auto" class="attachment-60x60 size-60x60" alt=""></a></strong><p class="filename"><span class="screen-reader-text">Dosya adı: </span>'+e.original_name+'</p><div class="row-actions"><span class="delete"><a href="javascript:;" class="delete-attachment" data-id="'+e.name+'" data-type="'+e.type+'" role="button">Kalıcı olarak sil</a> | </span><span class="view"><a href="javascript:;" data-name="'+e.original_name+'" data-format="'+e.format+'" data-create="'+e.createdAt+'" data-widthh="'+e.width+" x "+e.height+'" data-type="'+e.type+'" data-size="'+e.size+'" data-id="'+e.name+'" onclick="document_parse(\''+e.path+'\',this)" rel="bookmark">Görüntüle</a></span></div></td><td class="date column-date" data-colname="Tarih">'+e.createdAt+"</td></tr>"):$("#the-list").append('<tr class="author-self status-inherit"><th scope="row" class="check-column"><label class="screen-reader-text">'+e.name+'</label><input type="checkbox" class="checkboxs" name="media" value="'+e.name+'" data-type="'+e.type+'" data-id="'+e.name+'"></th><td class="title column-title has-row-actions column-primary" data-colname="Dosya"><strong class="has-media-icon"><a href="javascript:;" data-id="'+e.name+'" onclick="document_parse(\''+e.path+'\',this)" rel="bookmark"><img width="60" height="60" src="'+window.plugin_option.plugin_dir+'admin/assets/images/folder.svg" class="attachment-60x60 size-60x60" alt=""></a></strong><p class="filename"><span class="screen-reader-text">Dosya adı: </span>'+e.name+'</p><div class="row-actions"><span class="delete"><a href="javascript:;" class="delete-attachment" data-id="'+e.name+'" data-type="'+e.type+'" role="button">Kalıcı olarak sil</a> | </span><span class="view"><a href="javascript:;" data-id="'+e.name+'" onclick="document_parse(\''+e.path+'\',this)" rel="bookmark">Görüntüle</a></span></div></td><td class="date column-date" data-colname="Tarih"></td></tr>')})):$(".no-media").show(),clicks=0}});else if("attachments ui-sortable ui-sortable-disabled fileOkey image4ioList"==$(a).parent().attr("class")){var t='<img src="https://cdn.image4.io/'+window.plugin_option.path+$(a).attr("data-id")+'" />';if($("#wp-content-editor-container #mceu_24").hasClass("mce-tinymce"))if(console.log($(".mce-tinymce").attr("style")+" -> visibility: hidden; border-width: 1px; width: 100%; display: none;"),"visibility: hidden; border-width: 1px; width: 100%; display: none;"==$(".mce-tinymce").attr("style")){l=$(".wp-editor-area").val();$(".wp-editor-area").val(l+" "+t)}else{l=$(".mce-tinymce #content_ifr").contents().find("body").html();$(".mce-tinymce #content_ifr").contents().find("body").append(t)}else{var l=$(".wp-editor-area").val();$(".wp-editor-area").val(l+" "+t)}$(".mxlayer-close").trigger("click")}else $.ajax({url:window.plugin_option.plugin_dir+"query.php?get=imageDetail",type:"POST",data:{apiKey:window.plugin_option.apiKey,apiSecret:window.plugin_option.apiSecret,path:window.plugin_option.path,filesName:$(a).attr("data-id")},dataType:"json",success:function(e){$(".details-image").attr("src","https://cdn.image4.io/"+window.plugin_option.path+e.name),$(".delete-attachment").attr("data-id",e.name),$(".delete-attachment").attr("data-type",$(a).attr("data-type")),$(".filename span").html(e.userGivenName),$(".filetype span").html(e.format),$(".uploaded span").html(e.createdAtUTC),$(".file-size span").html(e.size+" KB"),$(".dimensions span").html(e.width+" x "+e.height+" px")}}),$(".mxlayer-close").trigger("click"),$.mxlayer({title:"",main:$("#main-template").html(),button:!1,cancel:function(e){},confirm:function(e){}});else"checked"==$(a).attr("data-check")?($(a).attr("data-check","0"),$(a).removeClass("details")):($(a).attr("data-check","checked"),$(a).addClass("details"))}function bread(e,a){"/"==e?($(".bread").html(""),$(".bread").append('<li><a href="javascript:;" data-type="folder" onclick="document_parse(\'/\',this)">Ana Klasör</a></li>')):$(".bread").append('<li> <span>></span> <a href="javascript:;" data-type="folder" onclick="document_parse(\''+e+"',this)\">"+a+"</a></li>")}function error_return(e){var a=[];return void 0!==e?(a=void 0!==e.status?e.status:e.message,a):(a=!1,a)}$(document).ready(function(){$("#toplevel_page_image4io .dashicons-admin-generic").addClass("icon-image2vector"),document_parse("/",this),$("#file_upload").change(function(){$(".uploadForms #progressBar").attr("style","width:0%"),$(".uploadForms #percent").html("0%");var e=new FormData($("#uploadForms")[0]);return $.ajax({url:window.plugin_option.plugin_dir+"query.php?get=imageUpload",type:"POST",data:e,xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",function(e){if(e.lengthComputable){var a=Math.round(e.loaded/e.total*100);$(".uploadForms #percent").html(a+"%"),$(".uploadForms #progressBar").clearQueue().stop(),$(".uploadForms #progressBar").animate({width:a+"%"})}},!1),e},complete:function(e){console.log(e),$("#status").html("Yükleme işleminiz başarı ile tamamlandı."),document_parse("/",this)},cache:!1,contentType:!1,processData:!1}),!1}),$(document).on("click",".image_upload",function(e){e.preventDefault(),$(".uploader-inline").show(),$(".allUpdateImage").hide()}),$(document).on("click","#upload_button",function(e){e.preventDefault(),$("#file_upload").trigger("click")}),$(document).on("click",".uploader-inline .close",function(e){e.preventDefault(),$(".uploader-inline").hide()}),$(document).on("click",".allSelect",function(e){e.preventDefault(),$(".media-toolbar-secondary").hide(),$(".media-toolbar-two").show(),$(".attachment .thumbnail").attr("style","opacity:.65"),$("ul.attachments").data("block",1)}),$(document).on("click",".notDelete",function(e){e.preventDefault(),$(".media-toolbar-secondary").show(),$(".media-toolbar-two").hide(),$(".attachment .thumbnail").attr("style","opacity:1"),$("ul.attachments").data("block",0)}),$(document).on("click",".deleteItems",function(e){e.preventDefault();var a="";console.log($(this).attr("data-type")),a="fileList "===$(this).attr("data-type")?"ul.attachments li":".checkboxs";var t=0;$(a).each(function(e){"checked"==$(a).eq(e).attr("data-check")&&(t=e)}),$(a).each(function(e){"checked"==$(a).eq(e).attr("data-check")&&$.ajax({url:window.plugin_option.plugin_dir+"query.php?get=deleteFiles",type:"POST",data:{apiKey:window.plugin_option.apiKey,apiSecret:window.plugin_option.apiSecret,path:window.plugin_option.path,type:$(a).eq(e).attr("data-type"),filesName:$(a).eq(e).attr("data-id")},dataType:"json",success:function(a){var i=[];i=void 0!==a.deletedFile?a.deletedFile:a.deletedFolder,"Deleted"!=i.status?($(".hatalar .alert-danger span").html(message.error.deleteError),$(".hatalar .alert").show(),$(".hatalar .success").hide(),hideErrorSuccess()):($(".hatalar .success span").html(message.success.deleteSuccess),$(".hatalar .alert").hide(),$(".hatalar .success").show(),hideErrorSuccess(),$(".media-toolbar-two").hide(),$(".media-toolbar-secondary").show(),$(".attachment .thumbnail").attr("style","opacity:1"),$("ul.attachments").data("block",0),t==e&&document_parse($(".createFolderImage").attr("data-id"),this))}})})}),$(document).on("click",".delete-attachment",function(e){e.preventDefault();var a=$(this).attr("data-id"),t=$(this).attr("data-type");console.log(a+" -> "+t),$.ajax({url:window.plugin_option.plugin_dir+"query.php?get=deleteFiles",type:"POST",data:{apiKey:window.plugin_option.apiKey,apiSecret:window.plugin_option.apiSecret,path:window.plugin_option.path,type:t,filesName:a},dataType:"json",success:function(e){var a=[];a=error_return(e.deletedFile)?error_return(e.deletedFile):error_return(e.deletedFolder),console.log(a),"Deleted"!=a?($(".hatalar .alert span").html(a),$(".hatalar .alert").show(),$(".hatalar .success").hide(),hideErrorSuccess()):($(".hatalar .success span").html(message.success.deleteSuccess),$(".hatalar .alert").hide(),$(".hatalar .success").show(),hideErrorSuccess(),$(".mxlayer-close").trigger("click"),document_parse($(".createFolderImage").attr("data-id"),this))}})}),$(document).on("click",".urlUploads",function(e){$("#urlUpload .alert").hide(),$("#url").val(""),$("#urlUpload").modal("show")}),$(document).on("click",".createFolderImage",function(e){$(".modal-body .alert").hide(),$("#folderName").val(""),$("#exampleModal").modal("show")}),$(document).on("click",".checkboxs",function(e){$(".checkboxs:checked").length>0?($(".checkboxs:checked").attr("data-check","checked"),$(".media-toolbar-secondary").hide(),$(".media-toolbar-two").show()):($(".checkboxs").attr("data-check",""),$(".media-toolbar-secondary").show(),$(".media-toolbar-two").hide())}),$(document).on("click",".allUpdate",function(e){$(".allUpdateImage").show(),allUpload()})});var value=0,clicks=0,i=0;